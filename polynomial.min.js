/*
Polinomial.js v1.0.0 03/07/2015

Copyright (c) 2015, Robert Eisele (robert@xarg.org)
Dual licensed under the MIT or GPL Version 2 licenses.
*/
(function(t){"use strict";function v(a){return function(){var b=this.coeff,d=[],e;for(e in b)d.push(+e);if(0===d.length)return"0";d.sort(function(a,d){return a-d});for(var f,c="",g=d.length;g--;){e=d[g];var l=b[e];f=l;if(null!==f&&void 0!==f){if(k&&f instanceof k){if(0===f.r&&0===f.i)continue;""!==c&&(0<f.r||0===f.r&&0<f.i)&&(c+="+");if(-1===f.r&&0===f.i&&0!==e)c+="-";else if(1!==f.r||0!==f.i||0===e)c+=l[a]?l[a]():l.toString()}else{f=f.valueOf();if(0===f)continue;""!==c&&0<f&&(c+="+");if(-1===f&&0!==e)c+="-";
else if(1!==f||0===e)c+=l[a]?l[a]():l.toString()}1===e?c+="x":0!==e&&(c+="x^"+e)}}return""===c?l[a]?l[a]():l.toString():c}}function m(a){var b={};if(null===a||void 0===a)a=0;switch(typeof a){case "object":a.coeff&&(a=a.coeff);for(var d in a)g.empty(a[d])||(b[d]=a[d]);return b;case "number":return{0:g.parse(a)};case "string":for(var e,f;null!==(d=z.exec(a));)f=e=1,void 0!==d[4]?(e=d[4],f=0):void 0!==d[2]&&(e=d[2]),e=g.parse(d[1]+e),void 0!==d[3]&&(f=parseInt(d[3],10)),b[f]=void 0===b[f]?e:g.add(b[f],
e);return b}throw"Invalid Param";}function u(a,b){for(var d={},e=q(a),f=q(b);e>=f;){var c=d[e-f]=g.div(a[e]||0,b[f]||0),h;for(h in b)a[+h+e-f]=g.sub(a[+h+e-f]||0,g.mul(b[h]||0,c));if(e===(h=q(a)))return null;e=h}return d}function w(a,b){var d=1;for(b=a-b;b<a;a--)d*=a;return d}function c(a){if(!(this instanceof c))return new c(a);this.coeff=m(a)}function p(a){var b={},d;for(d in a)b[d]=a[d];return b}function x(a,b){var d={},e;for(e in a)d[e]=1;for(e in b)d[e]=1;return d}function q(a){var b=Number.NEGATIVE_INFINITY,
d;for(d in a)g.empty(a[d])||(b=Math.max(d,b));return b}function r(a){var b=null,d;for(d in a)!g.empty(a[d])&&(null===b||+b<+d)&&(b=d);return b}function y(a,b){if(null!==b)for(var d in a)a[d]=g.div(a[d],a[b]);return a}var g={add:function(a,b){return a+b},sub:function(a,b){return a-b},mul:function(a,b){return a*b},div:function(a,b){if(0===b)throw"DIV/0";return a/b},parse:function(a){return parseFloat(a)},empty:function(a){return!a},pow:function(a,b){return Math.pow(a,b)}},A=g,n,k,z=/([+-]?)(?:([^+x-]+)?(?:x(?:\^([\d\/]+))?)|([^+x-]+))/g;
c.prototype.coeff={};c.prototype.gcd=function(a){var b=p(this.coeff);for(a=m(a);q(a)!==Number.NEGATIVE_INFINITY;){var d=p(b);u(d,a);b=a;a=d}a=r(b);return new c(y(b,a))};c.prototype.neg=function(){var a={},b=this.coeff,d;for(d in b)a[d]=g.mul(b[d],-1);return new c(a)};c.prototype.lc=function(){var a=r(this.coeff);return this.coeff[a]};c.prototype.lm=function(){var a=r(this.coeff),b={};b[a]=this.coeff[a];return new c(b)};c.prototype.monic=function(){return new c(y(p(this.coeff),r(this.coeff)))};c.prototype.add=
function(a){a=m(a);var b={},d=this.coeff,e=x(a,d),f;for(f in e)b[f]=g.add(d[f]||0,a[f]||0);return new c(b)};c.prototype.sub=function(a){a=m(a);var b={},d=this.coeff,e=x(a,d),f;for(f in e)b[f]=g.sub(d[f]||0,a[f]||0);return new c(b)};c.prototype.mul=function(a){a=m(a);var b={},d=this.coeff,e;for(e in a){e=+e;for(var f in d)f=+f,b[e+f]=g.add(b[e+f]||0,g.mul(a[e]||0,d[f]||0))}return new c(b)};c.prototype.addmul=function(a,b){var d=m(a),e=m(b),f={},c;for(c in d){c=+c;for(var h in e)h=+h,f[c+h]=g.add(f[c+
h]||0,g.mul(d[c]||0,e[h]||0))}return this.add(f)};c.prototype.div=function(a){return new c(u(p(this.coeff),m(a)))};c.prototype.pow=function(a){if(isNaN(a)||0>a||a%1)throw"Invalid";for(var b=new c(1),d=this;0<a;)a&1&&(b=b.mul(d)),d=d.mul(d),a>>=1;return b};c.prototype.mod=function(a){var b=p(this.coeff);u(b,m(a));return new c(b)};c.prototype.derive=function(a){if(void 0===a)a=1;else if(0>a)return null;var b=this.coeff,d={},e;for(e in b)+e>=a&&(d[e-a]=g.mul(b[e]||0,w(+e,a)));return new c(d)};c.prototype.integrate=
function(a){if(void 0===a)a=1;else if(0>a)return null;var b=this.coeff,d={},e;for(e in b)d[+e+a]=g.div(b[e]||0,w(+e+a,a));return new c(d)};c.prototype.toString=v("toString");c.prototype.toLatex=v("toLatex");c.prototype.clone=function(){return new c(this)};c.setField=function(a){if("Q"===a)g={add:function(a,b){return(new n(a)).add(b)},sub:function(a,b){return(new n(a)).sub(b)},mul:function(a,b){return(new n(a)).mul(b)},div:function(a,b){return(new n(a)).div(b)},parse:function(a){return new n(a)},empty:function(a){return(new n(a)).equals(0)},
pow:function(a,b){return(new n(a)).pow(b)}};else if("C"===a)g={add:function(a,b){return(new k(a)).add(b)},sub:function(a,b){return(new k(a)).sub(b)},mul:function(a,b){return(new k(a)).mul(b)},div:function(a,b){return(new k(a)).div(b)},parse:function(a){return new k(a)},empty:function(a){return(new k(a)).equals(0)},pow:function(a,b){return(new k(a)).pow(b)}};else if(!a||"R"===a)g=A;else if("object"===typeof a)g=a;else if("Z"===a.charAt(0)){var b=+a.slice(1);g={add:function(a,e){return((a+e)%b+b)%b},
sub:function(a,e){return((a-e)%b+b)%b},mul:function(a,e){return(a*e%b+b)%b},div:function(a,e){var c;c=e;for(var g=b,h=0,l=1,k=1,n=0;0!==c;){var m=g/c|0,p=g%c,q=h-k*m,m=l-n*m,g=c;c=p;h=k;l=n;k=q;n=m}c=[g,h,l];if(1!==c[0])throw"DIV/-";return(a*c[1]%b+b)%b},parse:function(a){return parseInt(a,10)},empty:function(a){return void 0===a||0===a},pow:function(a,c){for(var f=1;0<c;a=(a*a%b+b)%b,c>>=1)c&1&&(f=(f*a%b+b)%b);return f}}}};"function"===typeof define&&define.amd?define(["fraction.js","complex.js"],
function(a,b){n=a;k=b;return c}):"object"===typeof exports?(n=require("fraction.js"),k=require("complex.js"),module.exports=c):(n=t.Fraction,k=t.Complex,t.Polynomial=c)})(this);
