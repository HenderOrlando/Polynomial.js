/*
Polinomial.js v1.0.2 03/07/2015

Copyright (c) 2015, Robert Eisele (robert@xarg.org)
Dual licensed under the MIT or GPL Version 2 licenses.
*/
(function(r){"use strict";function u(a){return function(){var b=this.coeff,c=[],d;for(d in b)c.push(+d);if(0===c.length)return"0";c.sort(function(a,c){return a-c});for(var e,g="",f=c.length;f--;){d=c[f];var h=b[d];e=h;if(null!==e&&void 0!==e)if(k&&e instanceof k){if(0!==e.r){""!==g&&0<e.r&&(g+="+");if(-1===e.r&&0!==d)g+="-";else if(1!==e.r||0===d)g+=e.r;1===d?g+="x":0!==d&&(g+="x^"+d)}0!==e.i&&(""!==g&&0<e.i&&(g+="+"),-1===e.i?g+="-":1!==e.i&&(g+=e.i),g+="i",1===d?g+="x":0!==d&&(g+="x^"+d))}else if(e=e.valueOf(),
0!==e){""!==g&&0<e&&(g+="+");if(-1===e&&0!==d)g+="-";else if(1!==e||0===d)g+=h[a]?h[a]():h.toString();1===d?g+="x":0!==d&&(g+="x^"+d)}}return""===g?h[a]?h[a]():h.toString():g}}function m(a){var b={};if(null===a||void 0===a)a=0;switch(typeof a){case "object":a.coeff&&(a=a.coeff);if(a instanceof l||a instanceof k)b[0]=a;else for(var c in a)h.empty(a[c])||(b[c]=a[c]);return b;case "number":return{0:h.parse(a)};case "string":for(var d,e;null!==(c=y.exec(a));)e=d=1,void 0!==c[4]?(d=c[4],e=0):void 0!==
c[2]&&(d=c[2]),d=h.parse(c[1]+d),void 0!==c[3]&&(e=parseInt(c[3],10)),b[e]=void 0===b[e]?d:h.add(b[e],d);return b}throw"Invalid Param";}function t(a,b){for(var c={},d=n(a),e=n(b);d>=e;){var g=c[d-e]=h.div(a[d]||0,b[e]||0),f;for(f in b)a[+f+d-e]=h.sub(a[+f+d-e]||0,h.mul(b[f]||0,g));if(d===(f=n(a)))return null;d=f}return c}function v(a,b){var c=1;for(b=a-b;b<a;a--)c*=a;return c}function f(a){if(!(this instanceof f))return new f(a);this.coeff=m(a)}function p(a){var b={},c;for(c in a)b[c]=a[c];return b}
function w(a,b){var c={},d;for(d in a)c[d]=1;for(d in b)c[d]=1;return c}function n(a){var b=Number.NEGATIVE_INFINITY,c;for(c in a)h.empty(a[c])||(b=Math.max(c,b));return b}function q(a){var b=null,c;for(c in a)!h.empty(a[c])&&(null===b||+b<+c)&&(b=c);return b}function x(a,b){if(null!==b)for(var c in a)a[c]=h.div(a[c],a[b]);return a}var h={add:function(a,b){return a+b},sub:function(a,b){return a-b},mul:function(a,b){return a*b},div:function(a,b){if(0===b)throw"DIV/0";return a/b},parse:function(a){return parseFloat(a)},
empty:function(a){return!a},pow:function(a,b){return Math.pow(a,b)}},z=h,l,k,y=/([+-]?)(?:([^+x-]+)?(?:x(?:\^([\d\/]+))?)|([^+x-]+))/g;f.prototype.coeff={};f.prototype.gcd=function(a){var b=p(this.coeff);for(a=m(a);n(a)!==Number.NEGATIVE_INFINITY;){var c=p(b);t(c,a);b=a;a=c}a=q(b);return new f(x(b,a))};f.prototype.neg=function(){var a={},b=this.coeff,c;for(c in b)a[c]=h.mul(b[c],-1);return new f(a)};f.prototype.lc=function(){var a=q(this.coeff);return this.coeff[a]};f.prototype.lm=function(){var a=
q(this.coeff),b={};b[a]=this.coeff[a];return new f(b)};f.prototype.monic=function(){return new f(x(p(this.coeff),q(this.coeff)))};f.prototype.add=function(a){a=m(a);var b={},c=this.coeff,d=w(a,c),e;for(e in d)b[e]=h.add(c[e]||0,a[e]||0);return new f(b)};f.prototype.sub=function(a){a=m(a);var b={},c=this.coeff,d=w(a,c),e;for(e in d)b[e]=h.sub(c[e]||0,a[e]||0);return new f(b)};f.prototype.mul=function(a){a=m(a);var b={},c=this.coeff,d;for(d in a){d=+d;for(var e in c)e=+e,b[d+e]=h.add(b[d+e]||0,h.mul(a[d]||
0,c[e]||0))}return new f(b)};f.prototype.addmul=function(a,b){var c=m(a),d=m(b),e={},g;for(g in c){g=+g;for(var f in d)f=+f,e[g+f]=h.add(e[g+f]||0,h.mul(c[g]||0,d[f]||0))}return this.add(e)};f.prototype.div=function(a){return new f(t(p(this.coeff),m(a)))};f.prototype.pow=function(a){if(isNaN(a)||0>a||a%1)throw"Invalid";for(var b=new f(1),c=this;0<a;)a&1&&(b=b.mul(c)),c=c.mul(c),a>>=1;return b};f.prototype.mod=function(a){var b=p(this.coeff);t(b,m(a));return new f(b)};f.prototype.derive=function(a){if(void 0===
a)a=1;else if(0>a)return null;var b=this.coeff,c={},d;for(d in b)+d>=a&&(c[d-a]=h.mul(b[d]||0,v(+d,a)));return new f(c)};f.prototype.integrate=function(a){if(void 0===a)a=1;else if(0>a)return null;var b=this.coeff,c={},d;for(d in b)c[+d+a]=h.div(b[d]||0,v(+d+a,a));return new f(c)};f.prototype.result=function(a){var b=this.coeff,c=0,d;for(d in b)c=h.add(c,h.mul(b[d],h.pow(a,d)));return c};f.prototype.toString=u("toString");f.prototype.toLatex=u("toLatex");f.prototype.clone=function(){return new f(this)};
f.prototype.degree=function(){return n(this.coeff)};f.setField=function(a){if("Q"===a)h={add:function(a,b){return(new l(a)).add(b)},sub:function(a,b){return(new l(a)).sub(b)},mul:function(a,b){return(new l(a)).mul(b)},div:function(a,b){return(new l(a)).div(b)},parse:function(a){return new l(a)},empty:function(a){return(new l(a)).equals(0)},pow:function(a,b){return(new l(a)).pow(b)}};else if("C"===a)h={add:function(a,b){return(new k(a)).add(b)},sub:function(a,b){return(new k(a)).sub(b)},mul:function(a,
b){return(new k(a)).mul(b)},div:function(a,b){return(new k(a)).div(b)},parse:function(a){return new k(a)},empty:function(a){return(new k(a)).equals(0)},pow:function(a,b){return(new k(a)).pow(b)}};else if(!a||"R"===a)h=z;else if("object"===typeof a)h=a;else if("Z"===a.charAt(0)){var b=+a.slice(1);h={add:function(a,d){return((a+d)%b+b)%b},sub:function(a,d){return((a-d)%b+b)%b},mul:function(a,d){return(a*d%b+b)%b},div:function(a,d){var e;e=d;for(var f=b,h=0,k=1,l=1,m=0;0!==e;){var n=f/e|0,p=f%e,q=h-
l*n,n=k-m*n,f=e;e=p;h=l;k=m;l=q;m=n}e=[f,h,k];if(1!==e[0])throw"DIV/-";return(a*e[1]%b+b)%b},parse:function(a){return parseInt(a,10)},empty:function(a){return void 0===a||0===a},pow:function(a,d){for(var e=1;0<d;a=(a*a%b+b)%b,d>>=1)d&1&&(e=(e*a%b+b)%b);return e}}}};"function"===typeof define&&define.amd?define(["fraction.js","complex.js"],function(a,b){l=a;k=b;return f}):"object"===typeof exports?(l=require("fraction.js"),k=require("complex.js"),module.exports=f):(l=r.Fraction,k=r.Complex,r.Polynomial=
f)})(this);
